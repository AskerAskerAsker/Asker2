<!doctype html>
<html lang="pt-br">
<head>
<title>Editar perfil</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="stylesheet" href="/static/css/common.min.css">
<script src="/static/js/cookieman.js?v=1"></script>
<script>
	var cssfn = 'light.css';
	var cssversion = '?v=5';
	if (getDarkCookie() == 'true') { cssfn = 'dark.css'; }
	var link = document.createElement('link');
	link.id = 'theme-css';
	link.rel = 'stylesheet';
	link.type = 'text/css';
	link.href = '/static/css/' + cssfn + cssversion;
	document.head.appendChild(link);
</script>
	<style>
		*, .form-control {
			transition: background-color 1s, color 1s, border 1s;
		}

	</style>
</head>

	<body style="padding: 50px"><main>

		<h4>Foto de Perfil:</h4>
		<form method="post" enctype="multipart/form-data">
			<input type="hidden" name="type" value="profile-pic">
			{% csrf_token %}
			<label for="image">Escolha uma imagem:</label>
			<input type="file" class="form-control-file" id="image" name="file" required="required">
			<div style="padding-top: 5px"><input type="submit" class="btn btn-primary" style="border-radius: 30px" value="Alterar Foto"></div>
		</form>
		
    <br>
    
		<h4>Biografia:</h4>
		<form method="post">
			<input type="hidden" name="type" value="bio">
			{% csrf_token %}
			<textarea class="form-control" name="bio" maxlength="3000" width="70%">{{ user_p.bio }}</textarea>
			<div style="padding-top: 5px"><input class="btn btn-primary" type="submit" style="border-radius: 30px" value="Alterar Biografia"></div>
		</form>
 <br>
		<h4>Nome de Usuário:</h4>
		{{ invalid_username_text|safe }}
		<form accept-charset="utf-8" method="post" id="username_form">
			<input type="hidden" name="type" value="username">
			{% csrf_token %}

			<div class="form-row">
				<div class="col-md-4 mb-3">
					<input name="password" placeholder="Digite sua Senha:" class="form-control{{ invalid_password }}" type="password">
					<div class="invalid-feedback" style="display: {{ password_display }}">
						Senha Incorreta.
					</div>
				</div>
			</div>

			<div class="form-row">
				<div class="col-md-4 mb-3">
					<input maxlength="30" name="username" placeholder="Novo Nome de Usuário:" class="form-control{{ invalid_username }}" value="{{ username }}" type="text">
					<div class="invalid-feedback" style="display: {{ username_display }}">
						Nome de usuário em uso ou inválido.
					</div>
				</div>
			</div>

			<div class="form-row">
				<div class="col-md-4 mb-3">
				<input value="Alterar Nome" placeholder="" class="btn btn-primary" style="border-radius: 30px" type="submit">
				</div>
			</div>
		</form>

    <br>
	
		<h4>Privacidade:</h4>
		<form method="post">
			<input type="hidden" name="type" value="privacy">
			{% csrf_token %}
			{% if user_p.hide_activity %}
				<input type="checkbox" name="hide-activity" id="hide-activity" checked> <label class="inline" for="hide-activity"> Esconder Perguntas e Respostas do Meu Perfil</label><br>
			{% else %}
				<input type="checkbox" name="hide-activity" id="hide-activity"> <label class="inline" for="hide-activity"> Esconder Perguntas e Respostas do Meu Perfil</label><br>
			{% endif %}
			<input class="btn btn-primary" type="submit" style="border-radius: 30px; height: 13px" value="Alterar Privacidade">
		</form>

<br>
		<h4>Layout</h4>
		<input id="dark-mode" type="checkbox" name="dark-mode" /> <label class="inline" for="dark-mode"> Ativar Modo Escuro Para Este Dispositivo</label><br>

		{% if user.username == user_p.user.username %}
		<hr>
		<p>Seu email: {{ user.email }}</p>
		{% endif %}
    
<br><br>
    <a class="btn btn-primary" href="https://asker.fun">Salvar Alterações</a>
<br>
	</main>

	</body>
    <script src="/static/js/cookieman.js?v=1"></script>
	<script>
		darkcheckbox = document.getElementById('dark-mode');
		if (getDarkCookie() == 'true') {
			darkcheckbox.checked = true;
		}
		darkcheckbox.addEventListener('change', function() {
			if (this.checked) {
				setDarkCookie(true);
				document.getElementById('theme-css').href = '/static/css/' + 'dark.css' + cssversion;
			} else {
				setDarkCookie(false);
				document.getElementById('theme-css').href = '/static/css/' + 'light.css' + cssversion;
			}
		});
	</script>
</html>
