function enviar_resposta_pergunta(e){return e.style.opacity=.5,e.submit_btn.disabled=!0,$.ajax({url:"/save_answer",type:"post",data:$(e).serialize(),complete:function(s){var t=document.getElementById("response-counter-"+e.question_id.value);t.innerText=Number(t.innerText)+1,"1"==t.innerText?document.getElementById("response-sentence-"+e.question_id.value).innerText="resposta":document.getElementById("response-sentence-"+e.question_id.value).innerText="respostas",e.parentElement.innerHTML=s.responseText}}),!1}"true"==getDarkCookie()&&(document.getElementsByClassName("navbar")[0].classList.remove("navbar-light"),document.getElementsByClassName("navbar")[0].classList.add("navbar-dark"));var questoes_recentes=document.getElementById("lista_de_questoes_recentes");function renderizar_questoes(e){for(var s=0;s<20;++s)try{questoes_recentes.innerHTML+='<li class="list-group-item bg-main questao" data-id="'+e[s].id+'"><div class="card-body"><div class="flexbox"><h2 class="question-title fg-1"><a class="q-title" href="/question/'+e[s].id+'">'+e[s].text+"</a></h2></div>"+(""!=e[s].description?'<p class="description">'+e[s].description+"</p>":"")+'<small class="text-muted">'+(1==e[s].total_answers?'<span id="response-counter-'+e[s].id+'">1</span> <span id="response-sentence-'+e[s].id+'">resposta</span>':'<span id="response-counter-'+e[s].id+'">'+e[s].total_answers+'</span> <span id="response-sentence-'+e[s].id+'">respostas</span>')+" | "+e[s].pub_date+"</small><hr>"+("anonymous"==user_status?'<p>Faça <a href="/signin?redirect=/question/'+e[s].id+'">login</a> ou <a href="/signup?redirect=/question/'+e[s].id+'">crie uma conta</a> para responder essa pergunta.</p>':"")+("False"!=e[s].user_answer?'<div class="user-response" data-iddapergunta="'+e[s].id+'"><p><b>Sua resposta:</b><br>'+e[s].user_answer+"</p></div>":'<div class="user-response" data-iddapergunta="'+e[s].id+'"><div>'+("anonymous"!=user_status?'<button class="btn btn-outline-primary btn-sm" onclick="$(this).toggle(0); $(this.parentElement.parentElement.nextElementSibling).toggle(0);"><i class="fas fa-share"></i> responder':"")+'</button></div></div><div style="display: none"><form onsubmit="return enviar_resposta_pergunta(this);"><input type="hidden" name="csrfmiddlewaretoken" value="'+csrf_token+'"><input type="hidden" name="from" value="index"><input name="question_id" type="hidden" value="'+e[s].id+'"><textarea onclick=\'$(this).css("height", "120px");\' name="text" maxlength="5000" class="form-control form-control-sm" placeholder="Sua resposta" required></textarea><button name="submit_btn" type="submit" class="btn btn-outline-primary btn-sm"><i class="far fa-paper-plane"></i> Enviar</button></form></div>')+"</div></li>"}catch(e){}$(".description").linkify()}renderizar_questoes(recent_questions);var questoes_populares=document.getElementById("lista_de_questoes_populares");function renderizar_questoes_populares(e){for(var s=0;s<20;++s)try{questoes_populares.innerHTML+='<li class="list-group-item bg-main questao" data-id="'+e[s].id+'"><div class="card-body"><div class="flexbox"><h2 class="question-title fg-1"><a class="q-title" href="/question/'+e[s].id+'">'+e[s].text+"</a></h2></div>"+(""!=e[s].description?'<p class="description">'+e[s].description+"</p>":"")+'<small class="text-muted">'+(1==e[s].total_answers?'<span id="response-counter-'+e[s].id+'">1</span> <span id="response-sentence-'+e[s].id+'">resposta</span>':'<span id="response-counter-'+e[s].id+'">'+e[s].total_answers+'</span> <span id="response-sentence-'+e[s].id+'">respostas</span>')+" | "+e[s].pub_date+"</small><hr>"+("anonymous"==user_status?'<p>Faça <a href="/signin?redirect=/question/'+e[s].id+'">login</a> ou <a href="/signup?redirect=/question/'+e[s].id+'">crie uma conta</a> para responder essa pergunta.</p>':"")+("False"!=e[s].user_answer?'<div class="user-response" data-iddapergunta="'+e[s].id+'"><p><b>Sua resposta:</b><br>'+e[s].user_answer+"</p></div>":'<div class="user-response" data-iddapergunta="'+e[s].id+'"><div>'+("anonymous"!=user_status?'<button class="btn btn-outline-primary btn-sm" onclick="$(this).toggle(0); $(this.parentElement.parentElement.nextElementSibling).toggle(0);"><i class="fas fa-share"></i> responder':"")+'</button></div></div><div style="display: none"><form onsubmit="return enviar_resposta_pergunta(this);"><input type="hidden" name="csrfmiddlewaretoken" value="'+csrf_token+'"><input type="hidden" name="from" value="index"><input name="question_id" type="hidden" value="'+e[s].id+'"><textarea onclick=\'$(this).css("height", "120px");\' name="text" maxlength="5000" class="form-control form-control-sm" placeholder="Sua resposta" required></textarea><button name="submit_btn" type="submit" class="btn btn-outline-primary btn-sm"><i class="far fa-paper-plane"></i> Enviar</button></form></div>')+"</div></li>"}catch(e){}}function load_more(e,s){e.style.display="none",s.style.display="block",$.ajax({url:"/more_questions",type:"get",dataType:"json",data:{id_de_inicio:document.getElementById("novas_questoes").getElementsByClassName("questao")[document.getElementById("novas_questoes").getElementsByClassName("questao").length-1].getAttribute("data-id")-1},complete:function(t){s.style.display="none",e.style.display="block",renderizar_questoes(t.responseJSON)}})}function load_more_popular(e,s,t){e.style.display="none",s.style.display="block",$.ajax({url:"/more_popular_questions",type:"get",dataType:"json",data:{page:t},complete:function(t){try{"true"==t.responseJSON.empty?(s.style.display="none",e.style.display="none",document.getElementById("questoes_populares").innerHTML+='<div class="end"><p>Fim! <i class="far fa-sad-cry" aria-hidden="true"></i> Veja as <a href="/news">perguntas recentes.</a></p></div>'):(s.style.display="none",e.style.display="block",renderizar_questoes_populares(t.responseJSON))}catch(e){console.log(e)}}})}renderizar_questoes_populares(popular_questions_),"popular"==mostrar_primeiro?(document.getElementById("novas_questoes").style.display="none",document.getElementById("questoes_populares").style.display="block",document.getElementById("botao-popular").style.borderBottomWidth="3px"):(document.getElementById("novas_questoes").style.display="block",document.getElementById("questoes_populares").style.display="none",document.getElementById("botao-recentes").style.borderBottomWidth="3px"),document.getElementsByTagName("body")[0].style.display="block";
