function enviar_resposta_pergunta(e){return e.style.opacity=.5,e.submit_btn.disabled=!0,$.ajax({url:"/save_answer",type:"post",data:$(e).serialize(),complete:function(s){var t=document.getElementById("response-counter-"+e.question_id.value);t.innerText=Number(t.innerText)+1,e.parentElement.innerHTML=s.responseText}}),!1}"true"==getDarkCookie()&&(document.getElementsByClassName("navbar")[0].classList.remove("navbar-light"),document.getElementsByClassName("navbar")[0].classList.add("navbar-dark"));var selected_user=null;function select_user(e){selected_user=e}function silence_user(){if(!selected_user)return 0;confirm("Você silenciou o usuário: "+selected_user)?$.ajax({type:"get",url:"/user/"+selected_user+"/silence",complete:function(e){if("Added"==e.responseText)return location.reload(),!1}}):alert("Você cancelou a operação."),$("#question-modal").modal("hide"),selected_user=null}var questoes_recentes=document.getElementById("lista_de_questoes_recentes");function renderizar_questoes(e){for(var s=0;s<20;++s)try{questoes_recentes.innerHTML+='<li class="list-group-item bg-main questao" data-id="'+e[s].id+'"><div class="card-body"><div class="flexbox"><h2 class="question-title fg-1"><a href="/question/'+e[s].id+'">'+e[s].text+"</a></h2>"+("anonymous"!=user_status?'<a class="clickable" href="javascript:void(0);" data-toggle="modal" data-target="#question-modal" onclick=\'select_user("'+e[s].creator+'");\'><i class="fas fa-ellipsis-h"></i></a>':"")+"</div>"+(""!=e[s].description?'<p class="description">'+e[s].description+"</p>":"")+'<small class="text-muted"><span>respostas: <span id="response-counter-'+e[s].id+'">'+e[s].total_answers+"</span></span><span>&nbsp;&middot;&nbsp;</span><span>perguntado "+e[s].pub_date+' por </span><a href="/user/'+e[s].creator+'">'+e[s].creator+"</a></small><hr>"+("anonymous"==user_status?'<p>Faça <a href="/signin?redirect=/question/'+e[s].id+'">login</a> ou <a href="/signup?redirect=/question/'+e[s].id+'">crie uma conta</a> para responder essa pergunta.</p>':"")+("False"!=e[s].user_answer?'<div class="user-response" data-iddapergunta="'+e[s].id+'"><p><b>Sua resposta:</b><br>'+e[s].user_answer+"</p></div>":'<div class="user-response" data-iddapergunta="'+e[s].id+'"><div>'+("anonymous"!=user_status?'<button class="btn btn-outline-primary btn-sm" onclick="$(this).toggle(0); $(this.parentElement.parentElement.nextElementSibling).toggle(0);"><i class="fas fa-share"></i> responder':"")+'</button></div></div><div style="display: none"><form onsubmit="return enviar_resposta_pergunta(this);"><input type="hidden" name="csrfmiddlewaretoken" value="'+csrf_token+'"><input type="hidden" name="from" value="index"><input name="question_id" type="hidden" value="'+e[s].id+'"><textarea onclick=\'$(this).css("height", "120px");\' name="text" maxlength="5000" class="form-control form-control-sm" placeholder="Sua resposta" required></textarea><button name="submit_btn" type="submit" class="btn btn-outline-primary btn-sm"><i class="far fa-paper-plane"></i> Enviar</button></form></div>')+"</div></li>"}catch(e){}}renderizar_questoes(recent_questions);for(var questoes_populares=document.getElementById("lista_de_questoes_populares"),index=0;index<20;++index)try{questoes_populares.innerHTML+='<li class="list-group-item bg-main questao" data-id="'+popular_questions[index].id+'"><div class="card-body"><div class="flexbox"><h2 class="question-title fg-1"><a href="/question/'+popular_questions[index].id+'">'+popular_questions[index].text+"</a></h2>"+("anonymous"!=user_status?'<a class="clickable" href="javascript:void(0);" data-toggle="modal" data-target="#question-modal" onclick=\'select_user("'+popular_questions[index].creator+'");\'><i class="fas fa-ellipsis-h"></i></a>':"")+"</div>"+(""!=popular_questions[index].description?'<p class="description">'+popular_questions[index].description+"</p>":"")+'<small class="text-muted"><span>respostas: <span id="response-counter-'+popular_questions[index].id+'">'+popular_questions[index].total_answers+"</span></span><span>&nbsp;&middot;&nbsp;</span><span>perguntado "+popular_questions[index].pub_date+' por </span><a href="/user/'+popular_questions[index].creator+'">'+popular_questions[index].creator+"</a></small><hr>"+("anonymous"==user_status?'<p>Faça <a href="/signin?redirect=/question/'+popular_questions[index].id+'">login</a> ou <a href="/signup?redirect=/question/'+popular_questions[index].id+'">crie uma conta</a> para responder essa pergunta.</p>':"")+("False"!=popular_questions[index].user_answer?'<div class="user-response" data-iddapergunta="'+popular_questions[index].id+'"><p><b>Sua resposta:</b><br>'+popular_questions[index].user_answer+"</p></div>":'<div class="user-response" data-iddapergunta="'+popular_questions[index].id+'"><div>'+("anonymous"!=user_status?'<button class="btn btn-outline-primary btn-sm" onclick="$(this).toggle(0); $(this.parentElement.parentElement.nextElementSibling).toggle(0);"><i class="fas fa-share"></i> responder':"")+'</button></div></div><div style="display: none"><form onsubmit="return enviar_resposta_pergunta(this);"><input type="hidden" name="csrfmiddlewaretoken" value="'+csrf_token+'"><input type="hidden" name="from" value="index"><input name="question_id" type="hidden" value="'+popular_questions[index].id+'"><textarea onclick=\'$(this).css("height", "120px");\' name="text" maxlength="5000" class="form-control form-control-sm" placeholder="Sua resposta" required></textarea><button name="submit_btn" type="submit" class="btn btn-outline-primary btn-sm"><i class="far fa-paper-plane"></i> Enviar</button></form></div>')+"</div></li>"}catch(e){}function load_more(e,s){e.style.display="none",s.style.display="block",$.ajax({url:"/more_questions",type:"get",dataType:"json",data:{id_de_inicio:document.getElementById("novas_questoes").getElementsByClassName("questao")[document.getElementById("novas_questoes").getElementsByClassName("questao").length-1].getAttribute("data-id")-1},complete:function(t){s.style.display="none",e.style.display="block",renderizar_questoes(t.responseJSON)}})}"popular"==mostrar_primeiro?(document.getElementById("novas_questoes").style.display="none",document.getElementById("questoes_populares").style.display="block",document.getElementById("botao-popular").style.borderBottomWidth="3px"):(document.getElementById("novas_questoes").style.display="block",document.getElementById("questoes_populares").style.display="none",document.getElementById("botao-recentes").style.borderBottomWidth="3px"),document.getElementsByTagName("body")[0].style.display="block";
