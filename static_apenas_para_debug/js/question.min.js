function like(e,t){var n=e.getElementsByTagName("img")[0],o=null;n.src.includes("white-heart.png")?(n.src="/static/images/red-heart.png?version=3",(o=e.getElementsByTagName("span")[0]).innerHTML=Number(o.innerHTML)+1):(n.src="/static/images/white-heart.png?version=3",(o=e.getElementsByTagName("span")[0]).innerHTML=Number(o.innerHTML)-1),$.ajax({url:"/answer/like",data:{answer_id:t},complete:function(){}})}function delete_response(e,t){confirm("Opa! Você tem certeza que deseja apagar sua resposta?")&&$.ajax({url:"/delete_response",data:{response_id:t},complete:function(){e.parentElement.parentElement.parentElement.remove()}})}function delete_comment(e){$.ajax({url:"/delete_comment",type:"get",data:{comment_id:e},complete:function(){alert("Comentário deletado.")}})}function report_question(e,t){$.ajax({type:"get",url:"/report",data:{type:"question",id:e},complete:function(){t.parentElement.innerHTML='<p>Pergunta denunciada <i class="far fa-check-circle"></i></p>',t.remove()}})}function chooseAnswer(e){$.ajax({url:"/answer/choose",data:{answer_id:e},complete:function(){for(var e=document.getElementsByClassName("choose-answer-btn"),t=e.length-1;t>=0;t--)e[t].remove(),location.reload()}})}function voteOnPoll(){let e=$("input[name='poll-option']:checked"),t=[];if(e.length<1)return 0;for(var n=0;n<e.length;n++)t.push(e[n].value);$.ajax({type:"POST",url:"/poll/vote",data:{poll:$("input[name=qpoll]").val(),choices:t,csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},success:function(){window.location.reload()}})}function undoVote(){$.ajax({type:"POST",url:"/poll/undovote",data:{poll:$("input[name=qpoll]").val(),csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},success:function(){window.location.reload()}})}function openChooser(){let e=document.getElementsByClassName("poll-chooser")[0];document.getElementsByClassName("poll-shower")[0].style.display="none",e.style.display="block"}function openShower(){let e=document.getElementsByClassName("poll-chooser")[0],t=document.getElementsByClassName("poll-shower")[0];e.style.display="none",t.style.display="block"}function setPollPercentages(){if(0==document.getElementsByClassName("poll-shower").length)return 0;let e=document.getElementsByClassName("choice-show");for(var t=0,n=[],o=0;o<e.length;o++){let a=Number(e[o].getElementsByClassName("vote-count")[0].textContent);t+=a,n.push(a)}for(var a=0;a<e.length;a++){let o=e[a].getElementsByClassName("progress-bar")[0],l=n[a]/t*100,s=Math.round(l)+"%";l>=15&&(o.textContent=s),o.title=s,o.style="width: "+s+";"}}function make_comment(e){$(e.previousElementSibling).toggle(0);var t=$(e).serialize();$.ajax({url:"/comment",type:"post",dataType:"json",data:t,complete:function(t){var n=t.responseText;e.parentElement.getElementsByTagName("ul")[0].innerHTML+=n,e.text.value="",$(e.previousElementSibling).toggle(0)}})}function delete_question(e){confirm("Opa! Tem certeza que deseja apagar sua resposta?")&&$.ajax({url:"/delete_question",type:"post",data:{csrfmiddlewaretoken:csrf_token,question_id:e},complete:function(){window.location=window.location.href.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i)[0]+"news"}})}setPollPercentages(),1==document.getElementsByClassName("poll-chooser").length&&openChooser(),document.getElementById("upload-photo").onchange=function(){var e=document.getElementById("upload-photo-text"),t=document.getElementById("delete-photo-icon"),n=document.getElementById("upload-photo");e.innerText=n.value.slice(12),t.style.display="inline"},document.getElementById("delete-photo-icon").onclick=function(){var e=document.getElementById("delete-photo-icon"),t=document.getElementById("upload-photo"),n=document.getElementById("upload-photo-text");e.style.display="none",n.innerText="",t.value=null};var formbgcolor="bg-white",bgcolor="bg-white",textcolor="text-dark",commentformbgcolor="bg-white",commentbgcolor="bg-light";"true"==getDarkCookie()&&(document.getElementsByClassName("navbar")[0].classList.remove("navbar-light"),document.getElementsByClassName("navbar")[0].classList.add("navbar-dark"));var formulario_de_resposta=document.getElementById("formulario_de_resposta");formulario_de_resposta.onsubmit=function(){document.getElementById("botao_enviar_resposta").disabled=!0;var e=new FormData(this);return $.ajax({url:"/save_answer",method:"post",data:e,cache:!1,contentType:!1,processData:!1,complete:function(e){document.getElementsByClassName("responses")[0].innerHTML+=e.responseText,formulario_de_resposta.remove()}}),!1};try{var description=document.getElementsByClassName("description")[0];description.innerText=description.innerText.replaceAll("&quot;",'"').replaceAll("&lt;","<").replaceAll("&gt;",">")}catch(e){console.log(e)}
